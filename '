browser.tabs.onActivated.addListener(listTabs);
//browser.tabs.onRemoved.addListener(listTabs);               // dont include removed tab
//browser.tabs.onMoved.addListener(listTabs);
//browser.tabs.onUpdated.addListener(listTabs);
//browser.tabs.onDetached.addListener(listTabs);
//browser.tabs.onAttached.addListener(listTabs);

var tempTitle;
var tabId = null;

function listTabs(){
    getCurrentWindowTabs().then((tabs) => {
        let tabsList = '';

        for (let tab of tabs){
            tabsList += tab.title;
            if(tab.active){
                tempTitle = tab.title;
                tabId = tab.id;
            }
            if(tabId !== tab.id){
                changeTitelTemp(tabId, tempTitle);
            }
        }
        changeTitel(tabsList);
    });
}


function changeTitleWindow(id, title){
    browser.windows.update(titlePreface: titel);

}


function changeTitelTemp(id ,title){
    console.log(`document.title = '${title}';`);
    browser.tabs.executeScript(id, {code: `document.title = '${title}';`});
}

function changeTitel(title){
    console.log(`document.title = '${title}';`);
    browser.tabs.executeScript({code: `document.title = '${title}';`});
}

function getCurrentWindowTabs(){
    return browser.tabs.query({currentWindow: true});
}
